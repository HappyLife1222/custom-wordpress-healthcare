function wpf_import(i){"use strict";var e=i.attr("id").replace("plupload-upload-ui",""),o=[],t=i.closest("form"),a=t.find(".wpf_error");(o=t.data("plupload")).browse_button=e,o.container=i.closest("form").attr("id"),o.file_data_name=i.data("name")?i.data("name"):o.file_data_name,o.multipart_params={nonce:"",action:""},i.data("formats")&&(o.filters=i.data("formats"));var n=new plupload.Uploader(o);n.init(),n.bind("FilesAdded",((e,o)=>{i.data("confirm")&&!confirm(i.data("confirm"))||(n.settings.multipart_params.action=t.find('input[name="action"]').val(),n.settings.multipart_params.nonce=t.find('input[name="nonce"]').val(),e.refresh(),e.start(),t.addClass("wpf_save"))})),n.bind("Error",((i,e)=>{t.removeClass("wpf_save"),e.message&&a.text(e.message)})),n.bind("FileUploaded",((i,e,o)=>{if(o){var n=JSON.parse(o.response);n.error?(t.removeClass("wpf_save"),a.text(n.error)):n.success&&(setTimeout((()=>{t.removeClass("wpf_save")}),1500),window.location.reload())}else t.removeClass("wpf_save")}))}!function($,i){"use strict";window.addEventListener("load",(function(){$("body").on("click","a.wpf_lightbox",(function(i){i.preventDefault(),i.stopPropagation();var e=$(this);$.ajax({url:this,success(o){o&&t(i,e.attr("title"),o,e.data("class"),e.data("top"))}})})).on("click",".wpf_delete",(function(e){if(confirm(i.template_delete)){var o=$(this),t=o.closest("table");$.ajax({url:this,dataType:"json",beforeSend(){t.addClass("wpf_save")},complete(){t.removeClass("wpf_save")},success(i){i&&"1"==i.status&&o.closest("tr").remove()}})}e.preventDefault()})).on("click",".open_media_uploader_image",(function(i){var e=$(this).closest(".wpf_background_image"),o=wp.media({frame:"post",state:"insert",multiple:!1});o.open(),o.on("insert",(()=>{var i=o.state().get("selection").first().toJSON();e.find("input").val(i.url),e.find("img").attr("src",i.url),e.addClass("has-image")})),i.preventDefault()})).on("click",".remove-background",(function(i){var e=$(this).closest(".wpf_background_image");1==confirm("Remove background image?")&&(e.find("input").val(""),e.find("img").attr("src",""),e.removeClass("has-image")),i.preventDefault()}))}),{once:!0,passive:!0});var e=()=>{var i=document;return Math.max(Math.max(i.body.scrollHeight,i.documentElement.scrollHeight),Math.max(i.body.offsetHeight,i.documentElement.offsetHeight),Math.max(i.body.clientHeight,i.documentElement.clientHeight))},o=i=>{27===i.keyCode&&(i.preventDefault(),a(i))},t=(i,t,n,p,s)=>{i.preventDefault(),$(document).on("keyup",o);var r="wpf_"+Math.random().toString(36).substr(2,9),c='<div id="'+r+'" class="wpf_admin_lightbox wpf_interface"><div class="wpf_lightbox_title">'+t+'</div><a href="#" class="wpf_close_lightbox">Ã—</a><div id="wpf_lightbox_container"><div class="wpf_lightbox_inner">'+n+'</div></div></div><div class="wpf_overlay"></div>';$("body").append(c),s||(s=100),p&&$("#"+r).addClass(p),$.event.trigger("WPF.openlightbox",[i,r]),$("#"+r).nextAll(".wpf_overlay").show(),$("#"+r).show().css("top",e()).animate({top:s},800),$("#"+r).find(".wpf_close_lightbox").on("click",a);let f=$("#wpf-import-btn");f.length&&wpf_import(f)},a=function(i){i.preventDefault(),$(document).off("keyup",o);var t=$(this).closest(".wpf_admin_lightbox");$.event.trigger("WPF.close_lightbox",this),t.animate({top:e()},800,(()=>{t.next(".wpf_overlay").remove(),t.remove()}))}}(jQuery,wpf_js);